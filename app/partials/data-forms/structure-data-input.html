<div class="panel-group" id="accordion" ng-model="group.groups" ui-sortable>
	<div class="panel panel-default"
		ng-repeat="group in structureData.data track by $index"
		>
		<div class="panel-heading">
			<div class="panel-title">
				Data Group {{ $index + 1 }}: 
				<edit-in-place value="group.key" type="text"></edit-in-place>
				<a data-toggle="collapse"
					data-parent="#accordion"
					data-target="#collapse-{{ $index }}"
					href=""
					ng-click="dataGroupBox[$index] = !dataGroupBox[$index]"
					>
					<i class="fa pull-right {{ dataGroupBox[$index] ? 'fa-caret-down' : 'fa-caret-up' }}"></i>
				</a>
			</div>
		</div>
    <div id="collapse-{{ $index }}" class="panel-collapse collapse" ng-class="{ in: $index === 0 }">
			<div class="panel-body">
				<table class="table table-striped">
					<thead>
						<tr>
							<th>Remove</th>
							<th data-ng-repeat="(key, type) in structureData.columnValues">
								{{ key }}
							</th>
						</tr>
					</thead>
					<tbody ng-model="group.values" ui-sortable>
						<tr ng-repeat="rows in group.values track by $index">
							<td>
								<span class="glyphicon glyphicon-minus"
									ng-click="removeRow($parent.$index, $index)"
									>
								</span>
							</td>
							<td ng-repeat="(key, type) in structureData.columnValues">
								<edit-in-place value="structureData.data[$parent.$parent.$index].values[$parent.$index][key]"
									type="{{ type }}"
									>
								</edit-in-place>
							</td>
						</tr>
						<tr>
							<td>
								<span class="glyphicon glyphicon-plus"
									ng-click="addRow($index)"
									>
								</span>
							</td>
							<td ng-repeat="(key, type) in structureData.columnValues">
								<input type="{{ type }}" class="form-control" placeholder="{{ type === 'number' ? 0 : 'name' }}" ng-model="newRow[$parent.$index][key]" />
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
