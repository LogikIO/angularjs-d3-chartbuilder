<div class="col-lg-3 sidebar">
  <div class="chartbuilder-sidebar-group clearfix">
    <div class="col-lg-12">
      <div class="dropdown">
        <h2 id="chartTypeSelect" class="select-dropdown" data-toggle="dropdown">
          {{ (chartbuilderData.name.length ? chartbuilderData.name : 'Select a chart type') }} <i class="fa fa-caret-down"></i>
        </h2>
        <ul class="dropdown-menu" role="menu" aria-labelledby="chartTypeSelect">
          <li ng-repeat="module in modules" >
            <a ui-sref="chartbuilder.{{ module.slug }}">{{ module.name }}</a>
          </li>
        </ul>
      </div>
      <p>Load a saved chartbuilder chart, or create a new one</p>
      <div class="btn-group">
        <chart-options-loader></chart-options-loader>
        <button type="button" class="btn btn-default">create new</button>
      </div>
    </div>
  </div>
  <div class="chartbuilder-sidebar-separator"></div>

  <div class="chartbuilder-sidebar-group clearfix">
    <div class="col-lg-12">
      <h2>Data</h2>
      <p>Edit the data you'd like to appear in the chart. You may also upload or paste CSV and TSV data</p>
      <div class="btn-group">
        <button type="button" class="btn btn-default" ng-click="chartbuilderData.showSampleData()">use sample</button>
        <button file-input-button type="button" on-file-load="chartbuilderData.loadDataSet(file)" class="btn btn-default btn-file-input" name="Read Data Set">upload</button>
        <button type="button" ng-click="chartbuilderData.downloadCSV()" class="btn btn-default btn-file-input" name="Download Data Set">download</button>
        <button type="butotn" ng-click="dataInputTextarea = !dataInputTextarea" class="btn btn-default" name="Paste Data Set">paste</button>
        <button type="button" class="btn btn-default" ng-click="chartbuilderData.resetData()">reset</button>
      </div>
    </div>

    <textarea class="form-control paste-input" ng-show="dataInputTextarea" ng-model="dataInputDataSet" ng-change="chartbuilderData.loadDataSet(dataInputDataSet)" placeholder="Paste TSV or CSV data"></textarea>
    <div structure-data-input structure-data="chartbuilderData" expand-data="dataInputTextarea"></div>
  </div>
  <div class="chartbuilder-sidebar-separator"></div>

  <div class="chartbuilder-sidebar-group chartbuilder-options clearfix">
    <div class="col-lg-12">
      <h2>Options</h2>
      <p>Set colors and other advanced options for the chart.</p>
      <div class="btn-group">
        <chart-template-options-loader ng-if="!chartbuilderData.env"></chart-template-options-loader>
        <button chart-options-saver ng-if="!chartbuilderData.env" type="button" class="btn btn-default" ng-click="downloadOptionsObject()" name="Save Options Template" ng-attr-options-only="true">save template options</button>
      </div>
    </div>

    <div class="panel-heading">
      <div class="panel-title">
        <h4>
          <a data-toggle="collapse"
            data-target="#collapse-color-options"
            href=""
            >
            Colors
          </a>
        </h4>
      </div>
    </div>
    <div id="collapse-color-options" class="panel-collapse collapse in">
      <div chartbuilder-colors chartbuilder="chartbuilderData"></div>
    </div>
    <div class="panel-heading">
      <div class="panel-title">
        <h4>
          <a data-toggle="collapse"
            data-target="#collapse-advanced-options"
            href=""
            ng-click="getAdvancedOptions()"
            >
            Advanced Options
          </a>
        </h4>
      </div>
    </div>
    <div id="collapse-advanced-options" class="panel-collapse collapse">
      <div class="panel-body">
        <chartbuilder-options json="chartbuilderData.options.chart" collapsed-level="1" node="nodeOptions" />
      </div>
    </div>
  </div>
  <div class="chartbuilder-sidebar-separator"></div>

  <div class="chartbuilder-sidebar-group clearfix">
    <div class="col-lg-12">
      <h2>Export</h2>
      <p>Save the chart as an image, or as data which you can load later with Chartbuilder</p>
      <div class="btn-group">
        <chartbuilder-save-to-png></chartbuilder-save-to-png>
        <button chart-options-saver type="button" class="btn btn-default" ng-click="downloadOptionsObject()" name="Save Chart Data">save chart data</button>
        <chart-options-from-window ng-show="chartbuilderData.env"></chart-options-from-window>
      </div>
    </div>
  </div>
</div>

<div class="col-lg-9">
  <div class="graph-wrapper">
    <h3><edit-in-place value="chartbuilderData.meta.title"></edit-in-place></h3>
    <h5><edit-in-place value="chartbuilderData.meta.subtitle"></edit-in-place></h5>
    <div ui-view="graph" id="chart"></div>
    <p><edit-in-place value="chartbuilderData.meta.caption"></edit-in-place></p>
    <h6>{{ chartbuilderData.meta.attribution }}</h6>
  </div>

  <canvas id="canvas" style="display: none" ng-attr-height="{{ chartbuilderData.options.chart.height }}px"></canvas>

  <div class="alert alert-info alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <strong>Example Data: </strong>{{ chartbuilderData.data | json }}
  </div>

  <textarea id="exportedSVG" ng-model="exportedSVG" ng-show="exportedSVG.length"></textarea>
</div>
