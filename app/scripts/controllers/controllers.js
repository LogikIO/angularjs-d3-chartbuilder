'use strict';

require('../services/services');
require('../directives/bsAffix');
require('../directives/colors');
require('../angular_modules/chartbuilder-options/options');
require('../../bower_components/spectrum/spectrum');
require('../../bower_components/angular-spectrum-colorpicker/dist/angular-spectrum-colorpicker.min');

/* Controllers */

angular
  
  .module('chartbuilderControllers', [
    'chartbuilderServices',
    'chartbuilderOptions',
    'angularSpectrumColorpicker'
  ])
  
  .controller('Home', [
    '$scope',
    'chartbuilderModuleRegistry',
    'chartbuilderData',
    function($scope, chartbuilderModuleRegistry, chartbuilderData) {
      $scope.modules = chartbuilderModuleRegistry;
      $scope.chartbuilderData = chartbuilderData;
    }
  ])

  .controller('ChartbuilderTutorials', [
    '$scope',
    function($scope) {
      $scope.tutorial1 = {'options':{'chart':{'type':'lineChart','height':600,'x':'function:date','y':'function:key/y','forceX':[null,null],'forceY':['0','18'],'dispatch':{},'lines':{'dispatch':{},'id':85549,'interactive':true,'xDomain':null,'yDomain':null,'xRange':null,'yRange':null,'sizeDomain':[16,256],'forceX':[],'forceY':[],'forceSize':[],'clipVoronoi':true,'useVoronoi':true,'padData':false,'margin':{'top':0,'right':0,'bottom':0,'left':0},'width':960,'height':500,'clipEdge':false,'interpolate':'linear'},'legend':{'dispatch':{},'margin':{'top':5,'right':0,'bottom':5,'left':0},'width':400,'height':20,'align':true,'rightAlign':true,'updateState':true,'radioButtonMode':false},'xAxis':{'orient':'bottom','tickValues':null,'tickSubdivide':0,'tickSize':6,'tickPadding':7,'tickFormat':'function:year-yyyy','domain':[0,1],'range':[0,1],'margin':{'top':0,'right':0,'bottom':0,'left':0},'width':75,'ticks':null,'height':60,'axisLabel':null,'showMaxMin':true,'highlightZero':true,'rotateYLabel':true,'rotateLabels':0,'staggerLabels':false,'axisLabelDistance':12},'yAxis':{'orient':'left','tickValues':null,'tickSubdivide':0,'tickSize':6,'tickPadding':3,'tickFormat':'function:percent-unmultiplied','domain':[0,1],'range':[0,1],'margin':{'top':0,'right':0,'bottom':0,'left':0},'width':75,'ticks':null,'height':60,'axisLabel':null,'showMaxMin':true,'highlightZero':true,'rotateYLabel':true,'rotateLabels':0,'staggerLabels':false,'axisLabelDistance':12},'interactiveLayer':{'dispatch':{},'margin':{'left':0,'top':0},'width':null,'height':null,'showGuideLine':true,'svgContainer':null},'xDomain':null,'yDomain':null,'xRange':null,'yRange':null,'interactive':true,'clipEdge':false,'clipVoronoi':true,'useVoronoi':false,'id':85549,'interpolate':'bundle','margin':{'top':30,'right':20,'bottom':50,'left':30},'width':null,'showLegend':false,'showXAxis':true,'showYAxis':true,'rightAlignYAxis':false,'useInteractiveGuideline':true,'tooltips':true,'state':{'disabled':[false,false,false,false,false,false,false,false,false,false,false,false,false]},'defaultState':null,'noData':'No Data Available.','transitionDuration':250},'styles':{'classes':{'with-3d-shadow':true,'with-transitions':true,'gallery':false},'css':{}}},'meta':{'title':'Since 1980, the gap has widened between U.S. health spending and that of other countries','subtitle':'Total health expenditures as percent of GDP, 1970 – 2012','caption':'Source: OECD (2013), \'OECD Health Data: Health expenditure and financing: Health expenditure indicators\', OECD Health Statistics (database).  doi: 10.1787/data-00349-en (Accessed on June, 25 2014). Notes: Data unavailable for: the Netherlands in 1970, 1971, and 2012; Australia in 1970 and 2012; Germany in 1991; and France from 1971 through 1974, 1976 through 1979; 1981 through 1984, and 1986 through 1989. Break in series in 2003 for Belgium and France and in 2005 for the Netherlands. 2012 data for Canada and Switzerland are estimated values.'},'data':[{'key':'United Kingdom','values':[{'x':1970,'y':4,'series':0},{'x':1971,'y':5,'series':0},{'x':1972,'y':5,'series':0},{'x':1973,'y':5,'series':0},{'x':1974,'y':5,'series':0},{'x':1975,'y':5,'series':0},{'x':1976,'y':5,'series':0},{'x':1977,'y':5,'series':0},{'x':1978,'y':5,'series':0},{'x':1979,'y':5,'series':0},{'x':1980,'y':6,'series':0},{'x':1981,'y':6,'series':0},{'x':1982,'y':6,'series':0},{'x':1983,'y':6,'series':0},{'x':1984,'y':6,'series':0},{'x':1985,'y':6,'series':0},{'x':1986,'y':6,'series':0},{'x':1987,'y':6,'series':0},{'x':1988,'y':6,'series':0},{'x':1989,'y':6,'series':0},{'x':1990,'y':6,'series':0},{'x':1991,'y':6,'series':0},{'x':1992,'y':7,'series':0},{'x':1993,'y':7,'series':0},{'x':1994,'y':7,'series':0},{'x':1995,'y':7,'series':0},{'x':1996,'y':7,'series':0},{'x':1997,'y':6,'series':0},{'x':1998,'y':7,'series':0},{'x':1999,'y':7,'series':0},{'x':2000,'y':7,'series':0},{'x':2001,'y':7,'series':0},{'x':2002,'y':8,'series':0},{'x':2003,'y':8,'series':0},{'x':2004,'y':8,'series':0},{'x':2005,'y':8,'series':0},{'x':2006,'y':8,'series':0},{'x':2007,'y':8,'series':0},{'x':2008,'y':9,'series':0},{'x':2009,'y':10,'series':0},{'x':2010,'y':9,'series':0},{'x':2011,'y':9,'series':0},{'x':2012,'y':9,'series':0}],'seriesIndex':0,'color':'#c7c7c7'},{'key':'Switzerland','values':[{'x':1970,'y':5,'series':1},{'x':1971,'y':6,'series':1},{'x':1972,'y':6,'series':1},{'x':1973,'y':6,'series':1},{'x':1974,'y':6,'series':1},{'x':1975,'y':7,'series':1},{'x':1976,'y':7,'series':1},{'x':1977,'y':7,'series':1},{'x':1978,'y':7,'series':1},{'x':1979,'y':7,'series':1},{'x':1980,'y':7,'series':1},{'x':1981,'y':7,'series':1},{'x':1982,'y':7,'series':1},{'x':1983,'y':8,'series':1},{'x':1984,'y':8,'series':1},{'x':1985,'y':8,'series':1},{'x':1986,'y':8,'series':1},{'x':1987,'y':8,'series':1},{'x':1988,'y':8,'series':1},{'x':1989,'y':8,'series':1},{'x':1990,'y':8,'series':1},{'x':1991,'y':9,'series':1},{'x':1992,'y':9,'series':1},{'x':1993,'y':9,'series':1},{'x':1994,'y':9,'series':1},{'x':1995,'y':9,'series':1},{'x':1996,'y':10,'series':1},{'x':1997,'y':10,'series':1},{'x':1998,'y':10,'series':1},{'x':1999,'y':10,'series':1},{'x':2000,'y':10,'series':1},{'x':2001,'y':10,'series':1},{'x':2002,'y':11,'series':1},{'x':2003,'y':11,'series':1},{'x':2004,'y':11,'series':1},{'x':2005,'y':11,'series':1},{'x':2006,'y':10,'series':1},{'x':2007,'y':10,'series':1},{'x':2008,'y':10,'series':1},{'x':2009,'y':11,'series':1},{'x':2010,'y':11,'series':1},{'x':2011,'y':11,'series':1},{'x':2012,'y':11,'series':1}],'seriesIndex':1,'color':'#c7c7c7'},{'key':'Sweden','values':[{'x':1970,'y':7,'series':2},{'x':1971,'y':7,'series':2},{'x':1972,'y':7,'series':2},{'x':1973,'y':7,'series':2},{'x':1974,'y':7,'series':2},{'x':1975,'y':7,'series':2},{'x':1976,'y':8,'series':2},{'x':1977,'y':8,'series':2},{'x':1978,'y':9,'series':2},{'x':1979,'y':8,'series':2},{'x':1980,'y':9,'series':2},{'x':1981,'y':9,'series':2},{'x':1982,'y':9,'series':2},{'x':1983,'y':9,'series':2},{'x':1984,'y':9,'series':2},{'x':1985,'y':8,'series':2},{'x':1986,'y':8,'series':2},{'x':1987,'y':8,'series':2},{'x':1988,'y':8,'series':2},{'x':1989,'y':8,'series':2},{'x':1990,'y':8,'series':2},{'x':1991,'y':8,'series':2},{'x':1992,'y':8,'series':2},{'x':1993,'y':8,'series':2},{'x':1994,'y':8,'series':2},{'x':1995,'y':8,'series':2},{'x':1996,'y':8,'series':2},{'x':1997,'y':8,'series':2},{'x':1998,'y':8,'series':2},{'x':1999,'y':8,'series':2},{'x':2000,'y':8,'series':2},{'x':2001,'y':9,'series':2},{'x':2002,'y':9,'series':2},{'x':2003,'y':9,'series':2},{'x':2004,'y':9,'series':2},{'x':2005,'y':9,'series':2},{'x':2006,'y':9,'series':2},{'x':2007,'y':9,'series':2},{'x':2008,'y':9,'series':2},{'x':2009,'y':10,'series':2},{'x':2010,'y':9,'series':2},{'x':2011,'y':9,'series':2},{'x':2012,'y':10,'series':2}],'seriesIndex':2,'color':'#c7c7c7'},{'key':'Netherlands','values':[{'x':1972,'y':7,'series':3},{'x':1973,'y':7,'series':3},{'x':1974,'y':7,'series':3},{'x':1975,'y':7,'series':3},{'x':1976,'y':7,'series':3},{'x':1977,'y':7,'series':3},{'x':1978,'y':7,'series':3},{'x':1979,'y':7,'series':3},{'x':1980,'y':7,'series':3},{'x':1981,'y':8,'series':3},{'x':1982,'y':8,'series':3},{'x':1983,'y':8,'series':3},{'x':1984,'y':7,'series':3},{'x':1985,'y':7,'series':3},{'x':1986,'y':7,'series':3},{'x':1987,'y':8,'series':3},{'x':1988,'y':8,'series':3},{'x':1989,'y':8,'series':3},{'x':1990,'y':8,'series':3},{'x':1991,'y':8,'series':3},{'x':1992,'y':8,'series':3},{'x':1993,'y':8,'series':3},{'x':1994,'y':8,'series':3},{'x':1995,'y':8,'series':3},{'x':1996,'y':8,'series':3},{'x':1997,'y':8,'series':3},{'x':1998,'y':8,'series':3},{'x':1999,'y':8,'series':3},{'x':2000,'y':8,'series':3},{'x':2001,'y':8,'series':3},{'x':2002,'y':9,'series':3},{'x':2003,'y':10,'series':3},{'x':2004,'y':10,'series':3},{'x':2005,'y':11,'series':3},{'x':2006,'y':11,'series':3},{'x':2007,'y':11,'series':3},{'x':2008,'y':11,'series':3},{'x':2009,'y':12,'series':3},{'x':2010,'y':12,'series':3},{'x':2011,'y':12,'series':3}],'seriesIndex':3,'color':'#c7c7c7'},{'key':'Germany','values':[{'x':1970,'y':6,'series':4},{'x':1971,'y':6,'series':4},{'x':1972,'y':7,'series':4},{'x':1973,'y':7,'series':4},{'x':1974,'y':8,'series':4},{'x':1975,'y':8,'series':4},{'x':1976,'y':8,'series':4},{'x':1977,'y':8,'series':4},{'x':1978,'y':8,'series':4},{'x':1979,'y':8,'series':4},{'x':1980,'y':8,'series':4},{'x':1981,'y':9,'series':4},{'x':1982,'y':9,'series':4},{'x':1983,'y':9,'series':4},{'x':1984,'y':9,'series':4},{'x':1985,'y':9,'series':4},{'x':1986,'y':9,'series':4},{'x':1987,'y':9,'series':4},{'x':1988,'y':9,'series':4},{'x':1989,'y':8,'series':4},{'x':1990,'y':8,'series':4},{'x':1992,'y':10,'series':4},{'x':1993,'y':10,'series':4},{'x':1994,'y':10,'series':4},{'x':1995,'y':10,'series':4},{'x':1996,'y':10,'series':4},{'x':1997,'y':10,'series':4},{'x':1998,'y':10,'series':4},{'x':1999,'y':10,'series':4},{'x':2000,'y':10,'series':4},{'x':2001,'y':11,'series':4},{'x':2002,'y':11,'series':4},{'x':2003,'y':11,'series':4},{'x':2004,'y':11,'series':4},{'x':2005,'y':11,'series':4},{'x':2006,'y':11,'series':4},{'x':2007,'y':10,'series':4},{'x':2008,'y':11,'series':4},{'x':2009,'y':12,'series':4},{'x':2010,'y':12,'series':4},{'x':2011,'y':11,'series':4},{'x':2012,'y':11,'series':4}],'seriesIndex':4,'color':'#c7c7c7'},{'key':'France','values':[{'x':1970,'y':5,'series':5},{'x':1975,'y':6,'series':5},{'x':1980,'y':7,'series':5},{'x':1985,'y':8,'series':5},{'x':1990,'y':8,'series':5},{'x':1991,'y':9,'series':5},{'x':1992,'y':9,'series':5},{'x':1993,'y':9,'series':5},{'x':1994,'y':9,'series':5},{'x':1995,'y':10,'series':5},{'x':1996,'y':10,'series':5},{'x':1997,'y':10,'series':5},{'x':1998,'y':10,'series':5},{'x':1999,'y':10,'series':5},{'x':2000,'y':10,'series':5},{'x':2001,'y':10,'series':5},{'x':2002,'y':11,'series':5},{'x':2003,'y':11,'series':5},{'x':2004,'y':11,'series':5},{'x':2005,'y':11,'series':5},{'x':2006,'y':11,'series':5},{'x':2007,'y':11,'series':5},{'x':2008,'y':11,'series':5},{'x':2009,'y':12,'series':5},{'x':2010,'y':12,'series':5},{'x':2011,'y':12,'series':5},{'x':2012,'y':12,'series':5}],'seriesIndex':5,'color':'#c7c7c7'},{'key':'Canada','values':[{'x':1970,'y':7,'series':6},{'x':1971,'y':7,'series':6},{'x':1972,'y':7,'series':6},{'x':1973,'y':7,'series':6},{'x':1974,'y':6,'series':6},{'x':1975,'y':7,'series':6},{'x':1976,'y':7,'series':6},{'x':1977,'y':7,'series':6},{'x':1978,'y':7,'series':6},{'x':1979,'y':7,'series':6},{'x':1980,'y':7,'series':6},{'x':1981,'y':7,'series':6},{'x':1982,'y':8,'series':6},{'x':1983,'y':8,'series':6},{'x':1984,'y':8,'series':6},{'x':1985,'y':8,'series':6},{'x':1986,'y':8,'series':6},{'x':1987,'y':8,'series':6},{'x':1988,'y':8,'series':6},{'x':1989,'y':8,'series':6},{'x':1990,'y':9,'series':6},{'x':1991,'y':9,'series':6},{'x':1992,'y':10,'series':6},{'x':1993,'y':10,'series':6},{'x':1994,'y':9,'series':6},{'x':1995,'y':9,'series':6},{'x':1996,'y':9,'series':6},{'x':1997,'y':9,'series':6},{'x':1998,'y':9,'series':6},{'x':1999,'y':9,'series':6},{'x':2000,'y':9,'series':6},{'x':2001,'y':9,'series':6},{'x':2002,'y':9,'series':6},{'x':2003,'y':10,'series':6},{'x':2004,'y':10,'series':6},{'x':2005,'y':10,'series':6},{'x':2006,'y':10,'series':6},{'x':2007,'y':10,'series':6},{'x':2008,'y':10,'series':6},{'x':2009,'y':11,'series':6},{'x':2010,'y':11,'series':6},{'x':2011,'y':11,'series':6},{'x':2012,'y':11,'series':6}],'seriesIndex':6,'color':'#c7c7c7'},{'key':'Belgium','values':[{'x':1970,'y':4,'series':7},{'x':1971,'y':4,'series':7},{'x':1972,'y':4,'series':7},{'x':1973,'y':4,'series':7},{'x':1974,'y':4,'series':7},{'x':1975,'y':6,'series':7},{'x':1976,'y':6,'series':7},{'x':1977,'y':6,'series':7},{'x':1978,'y':6,'series':7},{'x':1979,'y':6,'series':7},{'x':1980,'y':6,'series':7},{'x':1981,'y':7,'series':7},{'x':1982,'y':7,'series':7},{'x':1983,'y':7,'series':7},{'x':1984,'y':7,'series':7},{'x':1985,'y':7,'series':7},{'x':1986,'y':7,'series':7},{'x':1987,'y':7,'series':7},{'x':1988,'y':7,'series':7},{'x':1989,'y':7,'series':7},{'x':1990,'y':7,'series':7},{'x':1991,'y':8,'series':7},{'x':1992,'y':8,'series':7},{'x':1993,'y':8,'series':7},{'x':1994,'y':8,'series':7},{'x':1995,'y':8,'series':7},{'x':1996,'y':8,'series':7},{'x':1997,'y':8,'series':7},{'x':1998,'y':8,'series':7},{'x':1999,'y':8,'series':7},{'x':2000,'y':8,'series':7},{'x':2001,'y':8,'series':7},{'x':2002,'y':8,'series':7},{'x':2003,'y':10,'series':7},{'x':2004,'y':10,'series':7},{'x':2005,'y':10,'series':7},{'x':2006,'y':10,'series':7},{'x':2007,'y':10,'series':7},{'x':2008,'y':10,'series':7},{'x':2009,'y':11,'series':7},{'x':2010,'y':11,'series':7},{'x':2011,'y':11,'series':7},{'x':2012,'y':11,'series':7}],'seriesIndex':7,'color':'#c7c7c7'},{'key':'Australia','values':[{'x':1971,'y':5,'series':8},{'x':1972,'y':5,'series':8},{'x':1973,'y':5,'series':8},{'x':1974,'y':6,'series':8},{'x':1975,'y':6,'series':8},{'x':1976,'y':6,'series':8},{'x':1977,'y':7,'series':8},{'x':1978,'y':6,'series':8},{'x':1979,'y':6,'series':8},{'x':1980,'y':6,'series':8},{'x':1981,'y':6,'series':8},{'x':1982,'y':6,'series':8},{'x':1983,'y':6,'series':8},{'x':1984,'y':6,'series':8},{'x':1985,'y':6,'series':8},{'x':1986,'y':7,'series':8},{'x':1987,'y':6,'series':8},{'x':1988,'y':6,'series':8},{'x':1989,'y':6,'series':8},{'x':1990,'y':7,'series':8},{'x':1991,'y':7,'series':8},{'x':1992,'y':7,'series':8},{'x':1993,'y':7,'series':8},{'x':1994,'y':7,'series':8},{'x':1995,'y':7,'series':8},{'x':1996,'y':7,'series':8},{'x':1997,'y':7,'series':8},{'x':1998,'y':8,'series':8},{'x':1999,'y':8,'series':8},{'x':2000,'y':8,'series':8},{'x':2001,'y':8,'series':8},{'x':2002,'y':8,'series':8},{'x':2003,'y':8,'series':8},{'x':2004,'y':9,'series':8},{'x':2005,'y':8,'series':8},{'x':2006,'y':8,'series':8},{'x':2007,'y':9,'series':8},{'x':2008,'y':9,'series':8},{'x':2009,'y':9,'series':8},{'x':2010,'y':9,'series':8},{'x':2011,'y':9,'series':8}],'seriesIndex':8,'color':'#c7c7c7'},{'key':'United States','values':[{'x':1970,'y':7,'series':9},{'x':1971,'y':7,'series':9},{'x':1972,'y':7,'series':9},{'x':1973,'y':7,'series':9},{'x':1974,'y':7,'series':9},{'x':1975,'y':8,'series':9},{'x':1976,'y':8,'series':9},{'x':1977,'y':8,'series':9},{'x':1978,'y':8,'series':9},{'x':1979,'y':8,'series':9},{'x':1980,'y':9,'series':9},{'x':1981,'y':9,'series':9},{'x':1982,'y':10,'series':9},{'x':1983,'y':10,'series':9},{'x':1984,'y':10,'series':9},{'x':1985,'y':10,'series':9},{'x':1986,'y':10,'series':9},{'x':1987,'y':10,'series':9},{'x':1988,'y':11,'series':9},{'x':1989,'y':11,'series':9},{'x':1990,'y':12,'series':9},{'x':1991,'y':13,'series':9},{'x':1992,'y':13,'series':9},{'x':1993,'y':13,'series':9},{'x':1994,'y':13,'series':9},{'x':1995,'y':13,'series':9},{'x':1996,'y':13,'series':9},{'x':1997,'y':13,'series':9},{'x':1998,'y':13,'series':9},{'x':1999,'y':13,'series':9},{'x':2000,'y':13,'series':9},{'x':2001,'y':14,'series':9},{'x':2002,'y':15,'series':9},{'x':2003,'y':15,'series':9},{'x':2004,'y':15,'series':9},{'x':2005,'y':15,'series':9},{'x':2006,'y':15,'series':9},{'x':2007,'y':16,'series':9},{'x':2008,'y':16,'series':9},{'x':2009,'y':17,'series':9},{'x':2010,'y':17,'series':9},{'x':2011,'y':17,'series':9},{'x':2012,'y':17,'series':9}],'seriesIndex':9,'color':'#1f77b4'},{'key':'Comparable Country Average','values':[{'x':1970,'y':5,'series':10},{'x':1971,'y':6,'series':10},{'x':1972,'y':6,'series':10},{'x':1973,'y':6,'series':10},{'x':1974,'y':6,'series':10},{'x':1975,'y':7,'series':10},{'x':1976,'y':7,'series':10},{'x':1977,'y':7,'series':10},{'x':1978,'y':7,'series':10},{'x':1979,'y':7,'series':10},{'x':1980,'y':7,'series':10},{'x':1981,'y':7,'series':10},{'x':1982,'y':8,'series':10},{'x':1983,'y':8,'series':10},{'x':1984,'y':7,'series':10},{'x':1985,'y':8,'series':10},{'x':1986,'y':8,'series':10},{'x':1987,'y':8,'series':10},{'x':1988,'y':8,'series':10},{'x':1989,'y':8,'series':10},{'x':1990,'y':8,'series':10},{'x':1991,'y':8,'series':10},{'x':1992,'y':9,'series':10},{'x':1993,'y':9,'series':10},{'x':1994,'y':9,'series':10},{'x':1995,'y':9,'series':10},{'x':1996,'y':9,'series':10},{'x':1997,'y':9,'series':10},{'x':1998,'y':9,'series':10},{'x':1999,'y':9,'series':10},{'x':2000,'y':9,'series':10},{'x':2001,'y':9,'series':10},{'x':2002,'y':9,'series':10},{'x':2003,'y':10,'series':10},{'x':2004,'y':10,'series':10},{'x':2005,'y':10,'series':10},{'x':2006,'y':10,'series':10},{'x':2007,'y':10,'series':10},{'x':2008,'y':10,'series':10},{'x':2009,'y':11,'series':10},{'x':2010,'y':11,'series':10},{'x':2011,'y':11,'series':10},{'x':2012,'y':11,'series':10}],'seriesIndex':10,'color':'#8c564b'},{'key':'Japan','values':[{'x':1970,'y':4,'series':11},{'x':1971,'y':5,'series':11},{'x':1972,'y':5,'series':11},{'x':1973,'y':5,'series':11},{'x':1974,'y':5,'series':11},{'x':1975,'y':6,'series':11},{'x':1976,'y':6,'series':11},{'x':1977,'y':6,'series':11},{'x':1978,'y':6,'series':11},{'x':1979,'y':6,'series':11},{'x':1980,'y':6,'series':11},{'x':1981,'y':6,'series':11},{'x':1982,'y':7,'series':11},{'x':1983,'y':7,'series':11},{'x':1984,'y':6,'series':11},{'x':1985,'y':7,'series':11},{'x':1986,'y':7,'series':11},{'x':1987,'y':7,'series':11},{'x':1988,'y':6,'series':11},{'x':1989,'y':6,'series':11},{'x':1990,'y':6,'series':11},{'x':1991,'y':6,'series':11},{'x':1992,'y':6,'series':11},{'x':1993,'y':6,'series':11},{'x':1994,'y':7,'series':11},{'x':1995,'y':7,'series':11},{'x':1996,'y':7,'series':11},{'x':1997,'y':7,'series':11},{'x':1998,'y':7,'series':11},{'x':1999,'y':7,'series':11},{'x':2000,'y':8,'series':11},{'x':2001,'y':8,'series':11},{'x':2002,'y':8,'series':11},{'x':2003,'y':8,'series':11},{'x':2004,'y':8,'series':11},{'x':2005,'y':8,'series':11},{'x':2006,'y':8,'series':11},{'x':2007,'y':8,'series':11},{'x':2008,'y':9,'series':11},{'x':2009,'y':10,'series':11},{'x':2010,'y':10,'series':11},{'x':2011,'y':10,'series':11},{'x':2012,'y':10,'series':11}],'seriesIndex':11,'color':'#c7c7c7'},{'key':'Austria','values':[{'x':1970,'y':5,'series':12},{'x':1971,'y':5,'series':12},{'x':1972,'y':5,'series':12},{'x':1973,'y':5,'series':12},{'x':1974,'y':5,'series':12},{'x':1975,'y':7,'series':12},{'x':1976,'y':7,'series':12},{'x':1977,'y':7,'series':12},{'x':1978,'y':7,'series':12},{'x':1979,'y':7,'series':12},{'x':1980,'y':7,'series':12},{'x':1981,'y':7,'series':12},{'x':1982,'y':6,'series':12},{'x':1983,'y':6,'series':12},{'x':1984,'y':6,'series':12},{'x':1985,'y':6,'series':12},{'x':1986,'y':7,'series':12},{'x':1987,'y':7,'series':12},{'x':1988,'y':7,'series':12},{'x':1989,'y':7,'series':12},{'x':1990,'y':8,'series':12},{'x':1991,'y':8,'series':12},{'x':1992,'y':9,'series':12},{'x':1993,'y':9,'series':12},{'x':1994,'y':10,'series':12},{'x':1995,'y':10,'series':12},{'x':1996,'y':10,'series':12},{'x':1997,'y':10,'series':12},{'x':1998,'y':10,'series':12},{'x':1999,'y':10,'series':12},{'x':2000,'y':10,'series':12},{'x':2001,'y':10,'series':12},{'x':2002,'y':10,'series':12},{'x':2003,'y':10,'series':12},{'x':2004,'y':10,'series':12},{'x':2005,'y':10,'series':12},{'x':2006,'y':10,'series':12},{'x':2007,'y':10,'series':12},{'x':2008,'y':10,'series':12},{'x':2009,'y':11,'series':12},{'x':2010,'y':11,'series':12},{'x':2011,'y':11,'series':12},{'x':2012,'y':11,'series':12}],'seriesIndex':12,'color':'#c7c7c7'}],'columnValues':[],'sampleData':{'exampleData':[{'key':'Price','area':true,'values':[[1136005200000,71.89],[1138683600000,75.51],[1141102800000,68.49],[1143781200000,62.72],[1146369600000,70.39],[1149048000000,59.77],[1151640000000,57.27],[1154318400000,67.96],[1156996800000,67.85],[1159588800000,76.98],[1162270800000,81.08],[1164862800000,91.66],[1167541200000,84.84],[1170219600000,85.73],[1172638800000,84.61],[1175313600000,92.91],[1177905600000,99.8],[1180584000000,121.191],[1183176000000,122.04],[1185854400000,131.76],[1188532800000,138.48],[1191124800000,153.47],[1193803200000,189.95],[1196398800000,182.22],[1199077200000,198.08],[1201755600000,135.36],[1204261200000,125.02],[1206936000000,143.5],[1209528000000,173.95],[1212206400000,188.75],[1214798400000,167.44],[1217476800000,158.95],[1220155200000,169.53],[1222747200000,113.66],[1225425600000,107.59],[1228021200000,92.67],[1230699600000,85.35],[1233378000000,90.13],[1235797200000,89.31],[1238472000000,105.12],[1241064000000,125.83],[1243742400000,135.81],[1246334400000,142.43],[1249012800000,163.39],[1251691200000,168.21],[1254283200000,185.35],[1256961600000,188.5],[1259557200000,199.91],[1262235600000,210.732],[1264914000000,192.063],[1267333200000,204.62],[1270008000000,235],[1272600000000,261.09],[1275278400000,256.88],[1277870400000,251.53],[1280548800000,257.25],[1283227200000,243.1],[1285819200000,283.75],[1288497600000,300.98],[1291093200000,311.15],[1293771600000,322.56],[1296450000000,339.32],[1298869200000,353.21],[1301544000000,348.5075],[1304136000000,350.13],[1306814400000,347.83],[1309406400000,335.67],[1312084800000,390.48],[1314763200000,384.83],[1317355200000,381.32],[1320033600000,404.78],[1322629200000,382.2],[1325307600000,405],[1327986000000,456.48],[1330491600000,542.44],[1333166400000,599.55],[1335758400000,583.98]]}]},'dataFormat':[{'key':'x','type':'number'},{'key':'y','type':'number'}],'name':'Line Chart','slug':'lineChart','template':'<nvd3 options=\'dataStore.options\' data=\'dataStore.data\' colors=\'dataStore.colors\' events=\'$root.events\' config=\'{ extended: true }\'></nvd3>','colors':['#1f77b4','#aec7e8','#ff7f0e','#ffbb78','#2ca02c','#98df8a','#d62728','#ff9896','#9467bd','#c5b0d5','#8c564b','#c49c94','#e377c2','#f7b6d2','#7f7f7f','#c7c7c7','#bcbd22','#dbdb8d','#17becf','#9edae5']}; 
      $scope.tutorial2 = {"options":{"chart":{"type":"scatterPlusLineChart","height":600,"scatter":{"onlyCircles":false,"dispatch":{},"margin":{"top":0,"right":0,"bottom":0,"left":0},"width":960,"height":500,"xDomain":null,"yDomain":null,"sizeDomain":null,"xRange":null,"yRange":null,"sizeRange":null,"forceX":[],"forceY":[],"forceSize":[],"interactive":true,"pointKey":null,"padData":false,"padDataOuter":0.1,"clipEdge":false,"clipVoronoi":true,"useVoronoi":true,"id":33052,"singlePoint":false},"showDistX":true,"showDistY":true,"forceX":[null,null],"forceY":["0","40"],"barColor":null,"dispatch":{},"legend":{"dispatch":{},"margin":{"top":5,"right":0,"bottom":5,"left":0},"width":400,"height":20,"align":true,"rightAlign":true,"updateState":true,"radioButtonMode":false},"controls":{"dispatch":{},"margin":{"top":5,"right":0,"bottom":5,"left":0},"width":400,"height":20,"align":true,"rightAlign":true,"updateState":false,"radioButtonMode":false},"xAxis":{"orient":"bottom","tickValues":null,"tickSubdivide":0,"tickSize":6,"tickPadding":10,"domain":[0,1],"range":[0,1],"margin":{"top":0,"right":0,"bottom":0,"left":0},"width":75,"ticks":null,"height":60,"axisLabel":null,"showMaxMin":true,"highlightZero":true,"rotateYLabel":true,"rotateLabels":0,"staggerLabels":false,"axisLabelDistance":12},"yAxis":{"orient":"left","tickValues":null,"tickSubdivide":0,"tickSize":6,"tickPadding":10,"domain":[0,1],"range":[0,1],"margin":{"top":0,"right":0,"bottom":0,"left":0},"width":75,"ticks":null,"height":60,"axisLabel":null,"showMaxMin":true,"highlightZero":true,"rotateYLabel":true,"rotateLabels":0,"staggerLabels":false,"axisLabelDistance":12},"distX":{"margin":{"top":0,"right":0,"bottom":0,"left":0},"width":400,"size":8},"distY":{"margin":{"top":0,"right":0,"bottom":0,"left":0},"width":400,"size":8},"id":33052,"interactive":true,"x":"function:x/y","y":"function:key/y","xDomain":null,"yDomain":null,"xRange":null,"yRange":null,"sizeDomain":null,"sizeRange":null,"forceSize":[],"clipVoronoi":true,"useVoronoi":true,"margin":{"top":30,"right":20,"bottom":50,"left":75},"width":null,"showControls":false,"showLegend":true,"showXAxis":true,"showYAxis":true,"rightAlignYAxis":false,"fisheye":0,"tooltips":true,"state":{"disabled":[false,false]},"defaultState":null,"noData":"No Data Available.","transitionDuration":250},"styles":{"classes":{"with-3d-shadow":true,"with-transitions":true,"gallery":false},"css":{}}},"meta":{"title":"The density of MRI units has increased more rapidly in the U.S. than in comparable countries","subtitle":"Magnetic Resonance Imaging (MRI) units per million population","caption":"Source: OECD (2013), \"OECD Health Data: Health expenditure and financing: Health expenditure indicators\", OECD Health Statistics (database). \ndoi: 10.1787/health-data-en (Accessed on September 10, 2014)."},"data":[{"key":"Comparable Country Average","values":[{"x":1995,"y":4.526,"series":0},{"x":1996,"y":2.89,"series":0},{"x":1997,"y":6.876,"series":0},{"x":1998,"y":5.655,"series":0},{"x":1999,"y":8.058,"series":0},{"x":2000,"y":5.295714286,"series":0},{"x":2001,"y":5.905714286,"series":0},{"x":2002,"y":6.3,"series":0},{"x":2003,"y":6.191428571,"series":0},{"x":2004,"y":6.465,"series":0},{"x":2005,"y":6.905,"series":0},{"x":2006,"y":7.32375,"series":0},{"x":2007,"y":6.783333333,"series":0},{"x":2008,"y":7.795,"series":0},{"x":2009,"y":8.513333333,"series":0},{"x":2010,"y":9.74625,"series":0},{"x":2011,"y":10.15625,"series":0},{"x":2012,"y":10.84,"series":0}],"slope":0.37141176470588233,"intercept":-737},{"key":"United States","values":[{"x":1995,"y":12.26,"series":1},{"x":1997,"y":13.46,"series":1},{"x":1999,"y":15.41,"series":1},{"x":2001,"y":20.11,"series":1},{"x":2003,"y":21.97,"series":1},{"x":2004,"y":26.67,"series":1},{"x":2006,"y":26.58,"series":1},{"x":2007,"y":25.93,"series":1},{"x":2010,"y":31.52,"series":1},{"x":2012,"y":34.45,"series":1}],"slope":1.3052941176470592,"intercept":-2593}],"columnValues":[],"sampleData":{"exampleData":[{"key":"Group 0","values":[{"x":0.4537726343289959,"y":-1.2277801604385605,"size":0.9651266711298376,"shape":"circle"},{"x":0.31979207326944015,"y":-0.2781578799790692,"size":0.9313579315785319,"shape":"cross"},{"x":2.1196986861086335,"y":-0.6113629365677111,"size":0.7760158039163798,"shape":"triangle-up"},{"x":0.10831086907197994,"y":-0.10210756749363205,"size":0.6090485716704279,"shape":"triangle-down"},{"x":-0.9802375906140841,"y":0.1799564315225012,"size":0.6295223457273096,"shape":"diamond"},{"x":-0.4632989126349953,"y":0.7171407318231222,"size":0.1270281500183046,"shape":"square"},{"x":0.6432660619576966,"y":0.8069758859915,"size":0.7792134697083384,"shape":"circle"},{"x":-0.012991705561013077,"y":1.9318034701107192,"size":0.407810440286994,"shape":"cross"},{"x":-0.3425499042474646,"y":0.768348551295762,"size":0.1305541698820889,"shape":"triangle-up"},{"x":-0.07412023176167114,"y":0.9389207917158896,"size":0.8073880744632334,"shape":"triangle-down"}],"slope":0.9217941139452159,"intercept":0.39276500255800784},{"key":"Group 1","values":[{"x":0.9365217236451725,"y":-0.05711215389867427,"size":0.983399230055511,"shape":"circle"},{"x":0.8813546668092942,"y":-0.08155685228538846,"size":0.5426172660663724,"shape":"cross"},{"x":-0.25359476381262824,"y":-0.8312688621709616,"size":0.886790569871664,"shape":"triangle-up"},{"x":-0.20622759531401866,"y":0.28590067054444046,"size":0.8545616501942277,"shape":"triangle-down"},{"x":-0.2170025050953835,"y":1.498304731350345,"size":0.606858192011714,"shape":"diamond"},{"x":1.1028742214721095,"y":1.1681716705404672,"size":0.15472897700965405,"shape":"square"},{"x":-0.3402267702089167,"y":-0.9518964479780415,"size":0.3080685187596828,"shape":"circle"},{"x":-0.9716723788108561,"y":-0.20059458340548716,"size":0.8557337915990502,"shape":"cross"},{"x":-0.9395139086817612,"y":0.5667601510999912,"size":0.5556914592161775,"shape":"triangle-up"},{"x":-1.1251375426762695,"y":-0.6483000654820212,"size":0.6405028540175408,"shape":"triangle-down"}],"slope":0.19819033146835863,"intercept":-0.2810580113437027},{"key":"Group 2","values":[{"x":0.6603162628406724,"y":-0.526744250397482,"size":0.5085671814158559,"shape":"circle"},{"x":-2.8220062126137457,"y":0.6615121584345438,"size":0.20665621338412166,"shape":"cross"},{"x":-0.6609157754760435,"y":-0.8414187524611061,"size":0.35440143290907145,"shape":"triangle-up"},{"x":-0.6227257159368124,"y":0.2844736977621346,"size":0.2912834184244275,"shape":"triangle-down"},{"x":0.5176564577108271,"y":0.5668798997722362,"size":0.9487721610348672,"shape":"diamond"},{"x":1.0874288893431148,"y":0.02504065637230393,"size":0.3686746242456138,"shape":"square"},{"x":0.9491592770022111,"y":-0.9578354347299077,"size":0.900934471283108,"shape":"circle"},{"x":0.3204712946130085,"y":-0.8501656602457551,"size":0.0410691921133548,"shape":"cross"},{"x":0.0216504516538798,"y":1.2305216604814726,"size":0.08214240381494164,"shape":"triangle-up"},{"x":-0.5721349656654784,"y":-0.7405069581170314,"size":0.7276052313391119,"shape":"triangle-down"}],"slope":0.8125974394008517,"intercept":-0.20635041664354503},{"key":"Group 3","values":[{"x":0.7766347131857199,"y":0.6959357022359123,"size":0.3585241697728634,"shape":"circle"},{"x":-0.9653445247186823,"y":-0.058758624842842146,"size":0.7643121285364032,"shape":"cross"},{"x":-0.3193287303584969,"y":0.21664991782589993,"size":0.14194554346613586,"shape":"triangle-up"},{"x":0.8176267455342597,"y":1.8902589656313973,"size":0.8958736648783088,"shape":"triangle-down"},{"x":-0.5848430395964199,"y":0.22719557989838898,"size":0.20538643840700388,"shape":"diamond"},{"x":-1.1198959555060215,"y":0.5685155476426946,"size":0.37514111609198153,"shape":"square"},{"x":-0.9151100466831936,"y":-1.036650342493919,"size":0.8657549354247749,"shape":"circle"},{"x":0.055408193475309134,"y":-0.0684441944430586,"size":0.8036257894709706,"shape":"cross"},{"x":0.5337761892904972,"y":0.3854516883485521,"size":0.43377260072156787,"shape":"triangle-up"},{"x":-0.8637065787673013,"y":1.6777820895350901,"size":0.45390962273813784,"shape":"triangle-down"}],"slope":0.48933338118717074,"intercept":-0.06537057366222143}]},"dataFormat":[{"key":"x","type":"number"},{"key":"y","type":"number"},{"key":"size","type":"number"},{"key":"shape","type":"text"}],"name":"Scatter Plus Line Chart","slug":"scatterPlusLineChart","template":"<nvd3 options=\"dataStore.options\" data=\"dataStore.data\" colors=\"dataStore.colors\" events=\"$root.events\" config=\"{ extended: true }\"></nvd3>","colors":["#1f77b4","#ff7f0e","#aec7e8","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],"shapes":["circle","cross","triangle-up","triangle-down","diamond","square"]}
    }
  ])
  .controller('ChartbuilderFAQ', [
    '$scope',
    '$location',
    '$anchorScroll',
    function($scope, $location, $anchorScroll) {
      $scope.scrollTo = function(id) {
        $location.hash(id);
        $anchorScroll();
      };
    }
  ])
  .controller('Chartbuilder', [
    '$scope',
    'chartbuilderModuleRegistry',
    'chartbuilderData',
    'chartbuilderError',
    function($scope, chartbuilderModuleRegistry, chartbuilderData, chartbuilderError) {
      $scope.modules = chartbuilderModuleRegistry;
      $scope.chartbuilderData = chartbuilderData;
      $scope.chartbuilderError = chartbuilderError;

      $scope.getAdvancedOptions = function() {
        if (!$scope.optionsLoaded) {
          $scope.nodeOptions.refresh();
          $scope.optionsLoaded = true;
        }
      };
    }
  ]);
